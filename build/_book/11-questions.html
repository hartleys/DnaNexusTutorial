<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11 Questions? | Introduction to DNA Nexus and Cloud Computing for Bioinformatics</title>
  <meta name="description" content="A tutorial in the use of the DNA nexus command line interface (CLI)." />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="11 Questions? | Introduction to DNA Nexus and Cloud Computing for Bioinformatics" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A tutorial in the use of the DNA nexus command line interface (CLI)." />
  <meta name="github-repo" content="hartleys/vArmyKnife" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11 Questions? | Introduction to DNA Nexus and Cloud Computing for Bioinformatics" />
  
  <meta name="twitter:description" content="A tutorial in the use of the DNA nexus command line interface (CLI)." />
  

<meta name="author" content="Stephen Hartley, PhD" />


<meta name="date" content="2019-12-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="10-3-appMon4.html">
<link rel="next" href="11-1-miscmisccmd2.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="1-MAINTITLE.html"><a href="1-MAINTITLE.html"><i class="fa fa-check"></i><b>1</b> Introduction to DNA Nexus and Cloud Computing for Bioinformatics</a><ul>
<li class="chapter" data-level="1.1" data-path="1-1-hi.html"><a href="1-1-hi.html"><i class="fa fa-check"></i><b>1.1</b> Hi!</a></li>
<li class="chapter" data-level="1.2" data-path="1-2-prepreintro2.html"><a href="1-2-prepreintro2.html"><i class="fa fa-check"></i><b>1.2</b> Target Audience:</a></li>
<li class="chapter" data-level="1.3" data-path="1-3-targetAudience.html"><a href="1-3-targetAudience.html"><i class="fa fa-check"></i><b>1.3</b> Audience Experience Level:</a></li>
<li class="chapter" data-level="1.4" data-path="1-4-targetAudienceNeeds.html"><a href="1-4-targetAudienceNeeds.html"><i class="fa fa-check"></i><b>1.4</b> Audience Needs:</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-whycloud.html"><a href="2-whycloud.html"><i class="fa fa-check"></i><b>2</b> Why use the cloud?</a><ul>
<li class="chapter" data-level="2.1" data-path="2-1-whycloud2.html"><a href="2-1-whycloud2.html"><i class="fa fa-check"></i><b>2.1</b> Why use the cloud?</a></li>
<li class="chapter" data-level="2.2" data-path="2-2-whycloud3.html"><a href="2-2-whycloud3.html"><i class="fa fa-check"></i><b>2.2</b> Why use the cloud?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-whichCloud.html"><a href="3-whichCloud.html"><i class="fa fa-check"></i><b>3</b> Which Cloud to Use?</a><ul>
<li class="chapter" data-level="3.1" data-path="3-1-whichCloud1.html"><a href="3-1-whichCloud1.html"><i class="fa fa-check"></i><b>3.1</b> Which Cloud to Use?</a></li>
<li class="chapter" data-level="3.2" data-path="3-2-whichCloud2.html"><a href="3-2-whichCloud2.html"><i class="fa fa-check"></i><b>3.2</b> Which Cloud to Use?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-dnanexusIntro.html"><a href="4-dnanexusIntro.html"><i class="fa fa-check"></i><b>4</b> DNA Nexus</a></li>
<li class="chapter" data-level="5" data-path="5-getStarted.html"><a href="5-getStarted.html"><i class="fa fa-check"></i><b>5</b> Getting Started</a><ul>
<li class="chapter" data-level="5.1" data-path="5-1-getStarted1.html"><a href="5-1-getStarted1.html"><i class="fa fa-check"></i><b>5.1</b> Getting Started</a></li>
<li class="chapter" data-level="5.2" data-path="5-2-getStarted2.html"><a href="5-2-getStarted2.html"><i class="fa fa-check"></i><b>5.2</b> Getting Started</a></li>
<li class="chapter" data-level="5.3" data-path="5-3-getStarted3.html"><a href="5-3-getStarted3.html"><i class="fa fa-check"></i><b>5.3</b> Getting Started</a></li>
<li class="chapter" data-level="5.4" data-path="5-4-getStarted4.html"><a href="5-4-getStarted4.html"><i class="fa fa-check"></i><b>5.4</b> Getting Started</a></li>
<li class="chapter" data-level="5.5" data-path="5-5-getStarted5.html"><a href="5-5-getStarted5.html"><i class="fa fa-check"></i><b>5.5</b> Getting Started</a></li>
<li class="chapter" data-level="5.6" data-path="5-6-getStarted6.html"><a href="5-6-getStarted6.html"><i class="fa fa-check"></i><b>5.6</b> Getting Started</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-CMDvsGUI.html"><a href="6-CMDvsGUI.html"><i class="fa fa-check"></i><b>6</b> Command Line vs GUI</a><ul>
<li class="chapter" data-level="6.1" data-path="6-1-dxweb0.html"><a href="6-1-dxweb0.html"><i class="fa fa-check"></i><b>6.1</b> The Web Interface</a></li>
<li class="chapter" data-level="6.2" data-path="6-2-dxweb1.html"><a href="6-2-dxweb1.html"><i class="fa fa-check"></i><b>6.2</b> The Web Interface</a></li>
<li class="chapter" data-level="6.3" data-path="6-3-dxweb2.html"><a href="6-3-dxweb2.html"><i class="fa fa-check"></i><b>6.3</b> The Web Interface</a></li>
<li class="chapter" data-level="6.4" data-path="6-4-dxweb4.html"><a href="6-4-dxweb4.html"><i class="fa fa-check"></i><b>6.4</b> The Web Interface</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-dx0.html"><a href="7-dx0.html"><i class="fa fa-check"></i><b>7</b> The Command Line tool: dx</a><ul>
<li class="chapter" data-level="7.1" data-path="7-1-dx1.html"><a href="7-1-dx1.html"><i class="fa fa-check"></i><b>7.1</b> Using the Command Line Tool</a></li>
<li class="chapter" data-level="7.2" data-path="7-2-dx1a.html"><a href="7-2-dx1a.html"><i class="fa fa-check"></i><b>7.2</b> Using the Command Line Tool</a></li>
<li class="chapter" data-level="7.3" data-path="7-3-dx1b.html"><a href="7-3-dx1b.html"><i class="fa fa-check"></i><b>7.3</b> Using the Command Line Tool</a></li>
<li class="chapter" data-level="7.4" data-path="7-4-dx2.html"><a href="7-4-dx2.html"><i class="fa fa-check"></i><b>7.4</b> Using the Command Line Tool</a></li>
<li class="chapter" data-level="7.5" data-path="7-5-dx3.html"><a href="7-5-dx3.html"><i class="fa fa-check"></i><b>7.5</b> Using the Command Line Tool</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-dnanexusNotes.html"><a href="8-dnanexusNotes.html"><i class="fa fa-check"></i><b>8</b> DNA Nexus Apps</a><ul>
<li class="chapter" data-level="8.1" data-path="8-1-dnaNexusAppsGATK1.html"><a href="8-1-dnaNexusAppsGATK1.html"><i class="fa fa-check"></i><b>8.1</b> Running Apps</a></li>
<li class="chapter" data-level="8.2" data-path="8-2-dnaNexusAppsGATK2.html"><a href="8-2-dnaNexusAppsGATK2.html"><i class="fa fa-check"></i><b>8.2</b> Running Apps</a></li>
<li class="chapter" data-level="8.3" data-path="8-3-dnaNexusAppsGATK3.html"><a href="8-3-dnaNexusAppsGATK3.html"><i class="fa fa-check"></i><b>8.3</b> Running Apps</a></li>
<li class="chapter" data-level="8.4" data-path="8-4-dnaNexusAppsGATK4.html"><a href="8-4-dnaNexusAppsGATK4.html"><i class="fa fa-check"></i><b>8.4</b> Running Apps</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-dnanexusCmdLine0.html"><a href="9-dnanexusCmdLine0.html"><i class="fa fa-check"></i><b>9</b> DNA Nexus Workstations and Scripts</a><ul>
<li class="chapter" data-level="9.1" data-path="9-1-dnanexusCmdLine1.html"><a href="9-1-dnanexusCmdLine1.html"><i class="fa fa-check"></i><b>9.1</b> DNA Nexus Workstations and Scripts</a></li>
<li class="chapter" data-level="9.2" data-path="9-2-rbinfotk.html"><a href="9-2-rbinfotk.html"><i class="fa fa-check"></i><b>9.2</b> R Bioinformatics Toolkit</a></li>
<li class="chapter" data-level="9.3" data-path="9-3-rbinfotkr.html"><a href="9-3-rbinfotkr.html"><i class="fa fa-check"></i><b>9.3</b> R Bioinformatics Toolkit</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-appMon1.html"><a href="10-appMon1.html"><i class="fa fa-check"></i><b>10</b> App Monitoring</a><ul>
<li class="chapter" data-level="10.1" data-path="10-1-appMon2.html"><a href="10-1-appMon2.html"><i class="fa fa-check"></i><b>10.1</b> App Monitoring</a></li>
<li class="chapter" data-level="10.2" data-path="10-2-appMon3.html"><a href="10-2-appMon3.html"><i class="fa fa-check"></i><b>10.2</b> App Monitoring</a></li>
<li class="chapter" data-level="10.3" data-path="10-3-appMon4.html"><a href="10-3-appMon4.html"><i class="fa fa-check"></i><b>10.3</b> App Monitoring</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-questions.html"><a href="11-questions.html"><i class="fa fa-check"></i><b>11</b> Questions?</a><ul>
<li class="chapter" data-level="11.1" data-path="11-1-miscmisccmd2.html"><a href="11-1-miscmisccmd2.html"><i class="fa fa-check"></i><b>11.1</b> More useful commands:</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-legal.html"><a href="12-legal.html"><i class="fa fa-check"></i><b>12</b> Legal</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to DNA Nexus and Cloud Computing for Bioinformatics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="questions" class="section level1">
<h1><span class="header-section-number">11</span> Questions?</h1>
<!-- ################################################################################################################ -->
<!-- ################################################################################################################ -->
<!-- #############################################################################

# Advanced: Creating a New App  {#creatingNewApp}

We are going to do a very simple example in which we upload some data, run a program on it, and then download the result.

Say we want to extract all the dictionary words that begin with "ni".

## The App Builder Wizard: {#wiz}

The first step is to create a new App. You can generate the files from a template, write them yourself, or 
you can use the dx app creation wizard. For your first project, I recommend the last option.

<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash nobr"></code></pre></div>
<pre><code>
dx-app-wizard
 DNAnexus App Wizard, API v1.0.0
 
 Basic Metadata
 
 Please enter basic metadata fields that will be used to describe your app.
 Optional fields are denoted by options with square brackets.  At the end of
 this wizard, the files necessary for building your app will be generated
 from the answers you provide.
 
 The name of your app must be unique on the DNAnexus platform.
 After creating your app for the first time, you will be able to publish new
 versions using the same app name.  App names are restricted to alphanumeric
 characters (a-z, A-Z, 0-9), and the characters ".", "_", and "-".
 App Name: <span style="color: red"> findNi </span>
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 The title, if provided, is what is shown as the name of your app on
 the website.  It can be any valid UTF-8 string.
 Title []: <span style="color: red"> Find Ni </span>
 
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 
 The summary of your app is a short phrase or one-line description
 of what your app does.  It can be any UTF-8 human-readable string.
 Summary []: <span style="color: red"> Finds words that begin with ni</span>
 
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 
 You can publish multiple versions of your app, and the version of
 your app is a string with which to tag a particular version.  We encourage
 the use of Semantic Versioning for labeling your apps (see
 http://semver.org/ for more details).
 Version [0.0.1]: <span style="color: red"> 0.0.1</span>
 
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 
 Input Specification
 
 You will now be prompted for each input parameter to your app.  Each
 parameter should have a unique name that uses only the underscore "_" and
 alphanumeric characters, and does not start with a number.
 
 1st input name (&lt;ENTER&gt; to finish): <span style="color: red"> wordsFile</span>
 Label (optional human-readable name) []: <span style="color: red"> File of all words</span>
 Your input parameter must be of one of the following classes:
 applet         array:file     array:record   file           int
 array:applet   array:float    array:string   float          record
 array:boolean  array:int      boolean        hash           string
 
 Choose a class (&lt;TAB&gt; twice for choices): <span style="color: red"> file</span>
 This is an optional parameter [y/n]: <span style="color: red"> n</span>
 
 2nd input name (&lt;ENTER&gt; to finish):
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 Output Specification
 
 You will now be prompted for each output parameter of your app.  Each
 parameter should have a unique name that uses only the underscore "_" and
 alphanumeric characters, and does not start with a number.
 
 1st output name (&lt;ENTER&gt; to finish): <span style="color: red"> outfile</span>
 Label (optional human-readable name) []: <span style="color: red"> Output file of words</span>
 Choose a class (&lt;TAB&gt; twice for choices): <span style="color: red"> file</span>
 
 2nd output name (&lt;ENTER&gt; to finish):
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 Timeout Policy
 
 Set a timeout policy for your app. Any single entry point of the
 app that runs longer than the specified timeout will fail with a
 TimeoutExceeded error. Enter an int greater than 0 with a single-letter
 suffix (m=minutes, h=hours, d=days) (e.g. "48h").
 Timeout policy [48h]: <span style="color: red"> 48h</span>
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 Template Options
 
 You can write your app in any programming language, but we provide
 templates for the following supported languages: Python, bash
 Programming language: <span style="color: red"> bash</span>
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 Access Permissions
 If you request these extra permissions for your app, users will see this
 fact when launching your app, and certain other restrictions will apply.
 For more information, see
 https://wiki.dnanexus.com/App-Permissions.
 
 Access to the Internet (other than accessing the DNAnexus API).
 Will this app need access to the Internet? [y/N]: <span style="color: red"> N</span>
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 Direct access to the parent project. This is not needed if your app
 specifies outputs,     which will be copied into the project after it's
 done running.
 Will this app need access to the parent project? [y/N]: <span style="color: red"> N</span>
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 System Requirements
 
 Common AWS instance types:
 +--------------------------------------------+
 |Name         |Memory_GB|Storage_GB|CPU_Cores|
 +-------------+---------+----------+---------|
 |mem1_ssd1_x2 |3.8      |32        |2        |
 |mem1_ssd1_x4 |7.5      |80        |4        |
 |mem1_ssd1_x8 |15.0     |160       |8        |
 |mem1_ssd1_x16|30.0     |320       |16       |
 |mem1_ssd1_x32|60.0     |640       |32       |
 |mem2_ssd1_x2 |7.5      |32        |2        |
 |mem2_ssd1_x4 |15.0     |80        |4        |
 |mem2_ssd1_x8 |30.0     |160       |8        |
 |mem3_ssd1_x2 |15.0     |32        |2        |
 |mem3_ssd1_x4 |30.5     |80        |4        |
 |mem3_ssd1_x8 |61.0     |160       |8        |
 |mem3_ssd1_x16|122.0    |320       |16       |
 |mem3_ssd1_x32|244.0    |640       |32       |
 |mem1_ssd2_x2 |3.8      |160       |2        |
 |mem1_ssd2_x4 |7.5      |320       |4        |
 |mem1_ssd2_x8 |15       |640       |8        |
 |mem1_ssd2_x16|30       |1280      |16       |
 |mem1_ssd2_x36|60       |2880      |36       |
 +--------------------------------------------+
 Common Azure instance types:
 +--------------------------------------------------+
 |Name               |Memory_GB|Storage_GB|CPU_Cores|
 +-------------------+---------+----------+---------|
 |azure:mem1_ssd1_x2 |3.9      |32        |2        |
 |azure:mem1_ssd1_x4 |7.8      |64        |4        |
 |azure:mem1_ssd1_x8 |15.7     |128       |8        |
 |azure:mem1_ssd1_x16|31.4     |256       |16       |
 |azure:mem2_ssd1_x1 |3.5      |128       |1        |
 |azure:mem2_ssd1_x2 |7.0      |128       |2        |
 |azure:mem2_ssd1_x4 |14.0     |128       |4        |
 |azure:mem2_ssd1_x8 |28.0     |256       |8        |
 |azure:mem2_ssd1_x16|56.0     |512       |16       |
 |azure:mem3_ssd1_x2 |14.0     |128       |2        |
 |azure:mem3_ssd1_x4 |28.0     |128       |4        |
 |azure:mem3_ssd1_x8 |56.0     |256       |8        |
 |azure:mem3_ssd1_x16|112.0    |512       |16       |
 |azure:mem3_ssd1_x20|140.0    |640       |20       |
 |azure:mem4_ssd1_x2 |28.0     |128       |2        |
 |azure:mem4_ssd1_x4 |56.0     |128       |4        |
 |azure:mem4_ssd1_x8 |112.0    |256       |8        |
 |azure:mem4_ssd1_x16|224      |512       |16       |
 |azure:mem4_ssd1_x32|448      |1024      |32       |
 +--------------------------------------------------+
 Default instance type: The instance type you select here will apply
 to all entry points in your app unless you override it. See
 https://wiki.dnanexus.com/API-Specification-v1.0.0/Instance-Types
 for more information.
 Choose an instance type for your app [mem1_ssd1_x4]: <span style="color: red"> mem1_ssd_x4</span>
</code></pre>
<div class="sourceCode nobr"><pre class="sourceCode bash nobr"><code class="sourceCode bash nobr"></code></pre></div><pre><code>
 *** Generating DNAnexus App Template... ***
 
 Your app specification has been written to the dxapp.json file. You can
 specify more app options by editing this file directly (see
 https://wiki.dnanexus.com/Developer-Portal for complete documentation).
 
 Created files:
      findNi/Readme.developer.md
      findNi/Readme.md
      findNi/dxapp.json
      findNi/resources/
      findNi/src/
      findNi/src/findNi.sh
      findNi/test/
 
 App directory created!  See https://wiki.dnanexus.com/Developer-Portal for
 tutorials on how to modify these files, or run "dx build findNi" or "dx
 build --create-app findNi" while logged in with dx.
 
 Running the DNAnexus build utility will create an executable on the
 DNAnexus platform.  Any files found in the resources directory will
 be uploaded so that they will be present in the root directory when the
 executable is run.
 
</code></pre>

Since the wizard is interactive, I have already performed this step and the example 
directory contains a copy of the output:


```bash
cp -R ../examples/findNi_original ./ex/findNi
```

## Modifying the App: {#modTheApp}

The app produced by the wizard is very minimal, it doesn't actually DO anything.


```bash
ls ./ex/findNi/
```

```
## dxapp.json
## findNi_original
## Readme.developer.md
## Readme.md
## resources
## src
## test
```

```bash
ls ./ex/findNi/src
```

```
## findNi.sh
```

The main files that you will need to modify are the dxapp.json file:


```bash
cat ./ex/findNi/dxapp.json
```

```
## {
##   "name": "findNi",
##   "title": "Find Ni",
##   "summary": "Finds words that begin with ni",
##   "dxapi": "1.0.0",
##   "version": "0.0.1",
##   "inputSpec": [
##     {
##       "name": "wordsFile",
##       "label": "File of all words",
##       "class": "file",
##       "optional": false,
##       "patterns": [
##         "*"
##       ],
##       "help": ""
##     }
##   ],
##   "outputSpec": [
##     {
##       "name": "outfile",
##       "label": "Output file of words",
##       "class": "file",
##       "patterns": [
##         "*"
##       ],
##       "help": ""
##     }
##   ],
##   "runSpec": {
##     "timeoutPolicy": {
##       "*": {
##         "hours": 48
##       }
##     },
##     "interpreter": "bash",
##     "release": "16.04",
##     "distribution": "Ubuntu",
##     "file": "src/findNi.sh",
##     "execDepends": [
##         {"name": "openjdk-8-jre-headless",
##          "package_manager": "apt"},
## 
##         {"name": "tabix",
##          "package_manager": "apt"}
##     ]
##   },
##   "regionalOptions": {
##     "aws:us-east-1": {
##       "systemRequirements": {
##         "*": {
##           "instanceType": "mem1_ssd1_x4"
##         }
##       }
##     }
##   }
## }
```

and also the bash script in the src directory:


```bash
cat ./ex/findNi/src/findNi.sh
```

```
## #!/bin/bash
## # helloWorldTestApp 0.0.2
## 
## main() {
## 
##     #First, let's print out the input file, to make sure the inputs 
##     # got set properly:
##     echo "Value of wordsFile: '$wordsFile'"
##     echo "Value of wordsFile_name: $wordsFile_name"
##     
##     #Next let's download the words file from the cloud and into
##     # our virtual machine.
##     dx download "$wordsFile" -o $wordsFile_name
## 
##     #This part is the program itself. It takes the input and grabs 
##     # all the words that begin with Ni
##     cat $wordsFile_name | grep "^ni" > words.that.begin.with.ni.txt
## 
##     #This part uploads the resultant file to the cloud
##     # If you don't do this, then all the files you made will be 
##     # deleted when the virtual machine gets shut down.
##     #Note: dx upload --brief returns a file code that 
##     # the next tool needs in order to register the output.
##     outfile_dx_code=$(dx upload words.that.begin.with.ni.txt --brief)
## 
##     #Finally: this part registers the output and connects it to this job
##     # That way the output will be accessable from the job screen.
##     dx-jobutil-add-output outfile "$outfile_dx_code" --class=file
## 
## 
## }
```

I have already generated new versions of these files.

For the json file, I just added some dependencies just to show how
one would do that. In this case I told the VM to install tabix and openJDK.
Note: I don't actually need them in this example.


```bash
cp ../examples/files/dxapp.v2.json ./ex/findNi/dxapp.json
cat ./ex/findNi/dxapp.json
```

```
## {
##   "name": "findNi",
##   "title": "Find Ni",
##   "summary": "Finds words that begin with ni",
##   "dxapi": "1.0.0",
##   "version": "0.0.1",
##   "inputSpec": [
##     {
##       "name": "wordsFile",
##       "label": "File of all words",
##       "class": "file",
##       "optional": false,
##       "patterns": [
##         "*"
##       ],
##       "help": ""
##     }
##   ],
##   "outputSpec": [
##     {
##       "name": "outfile",
##       "label": "Output file of words",
##       "class": "file",
##       "patterns": [
##         "*"
##       ],
##       "help": ""
##     }
##   ],
##   "runSpec": {
##     "timeoutPolicy": {
##       "*": {
##         "hours": 48
##       }
##     },
##     "interpreter": "bash",
##     "release": "16.04",
##     "distribution": "Ubuntu",
##     "file": "src/findNi.sh",
##     "execDepends": [
##         {"name": "openjdk-8-jre-headless",
##          "package_manager": "apt"},
## 
##         {"name": "tabix",
##          "package_manager": "apt"}
##     ]
##   },
##   "regionalOptions": {
##     "aws:us-east-1": {
##       "systemRequirements": {
##         "*": {
##           "instanceType": "mem1_ssd1_x4"
##         }
##       }
##     }
##   }
## }
```

Next we write the script itself. The main function gets executed
once the virtual machine is spun up and everything is installed and 
prepped. Note that it sets a bunch of environment variables that
link to the input files.

The program below runs through the provided words file and returns a 
file containing all the words that begin with "ni".


```bash
cp ../examples/files/findNi.v2.bash ./ex/findNi/src/findNi.sh
cat ./ex/findNi/src/findNi.sh
```

```
## #!/bin/bash
## # helloWorldTestApp 0.0.2
## 
## main() {
## 
##     #First, let's print out the input file, to make sure the inputs 
##     # got set properly:
##     echo "Value of wordsFile: '$wordsFile'"
##     echo "Value of wordsFile_name: $wordsFile_name"
##     
##     #Next let's download the words file from the cloud and into
##     # our virtual machine.
##     dx download "$wordsFile" -o $wordsFile_name
## 
##     #This part is the program itself. It takes the input and grabs 
##     # all the words that begin with Ni
##     cat $wordsFile_name | grep "^ni" > words.that.begin.with.ni.txt
## 
##     #This part uploads the resultant file to the cloud
##     # If you don't do this, then all the files you made will be 
##     # deleted when the virtual machine gets shut down.
##     #Note: dx upload --brief returns a file code that 
##     # the next tool needs in order to register the output.
##     outfile_dx_code=$(dx upload words.that.begin.with.ni.txt --brief)
## 
##     #Finally: this part registers the output and connects it to this job
##     # That way the output will be accessable from the job screen.
##     dx-jobutil-add-output outfile "$outfile_dx_code" --class=file
## 
## 
## }
```

## Building the App: {#buildApp}

Now we have to "build" the app, which packages up the app and uploads it to your current project


```bash
cd ./ex/
dx build -f findNi
```

```
## WARNING:dxpy:name "findNi" should be all lowercase
## INFO:dxpy:Deleting applet(s) applet-FggF5Y80pgP3jgKB337Pg12F
## {"id": "applet-Fggq7Jj0pgP0bYy934Kj7Z06"}
```

## Uploading Input Files {#uploadInput}

Before we can run our new app, first we need to upload an input file. For this we 
use the upload command:


```bash
dx upload ../examples/indata/linux.words.txt --brief --path /test/linux.words.txt
```

```
## file-Fggq7K80pgP7KZyvJ076yGYq
```

## Running the software {#run}

Before we can run our new app, first we need to upload an input file. For this we 
use the upload command:

    dx run findNi -i wordsFile=/test/linux.words.txt --destination /test/

## Downloading results {#dlres}

We can now download the results using the dx download command:


```bash
dx download /test/words.that.begin.with.ni.txt
#Let's see the first 50 words:
cat words.that.begin.with.ni.txt | head -n50
```

```
## Error: path "/mnt/nfs/gigantor/ifs/Shared/hartleys/docs/DnaNexusTutorial/build
## /words.that.begin.with.ni.txt" already exists but -f/--overwrite was not set
## ni
## niacin
## niacinamide
## niacins
## niagara
## niagra
## niais
## niaiserie
## nialamide
## niata
## nib
## nibbana
## nibbed
## nibber
## nibbing
## nibble
## nibbled
## nibbler
## nibblers
## nibbles
## nibbling
## nibblingly
## nibby
## nibby-jibby
## nibelung
## niblic
## niblick
## niblicks
## niblike
## nibong
## nibs
## nibsome
## nibung
## nicad
## nicads
## nicaean
## nicaragua
## nicaraguan
## nicaraguans
## niccolic
## niccoliferous
## niccolite
## niccolo
## niccolous
## nice
## niceish
## niceling
## nicely
## nicene
## nice-Nellie
```

<!-- ################################################################################################################ -->
<!-- ################################################################################################################ -->
<!-- ################################################################################################################ --> 
</div>


<script src="resizeToFit.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="10-3-appMon4.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="11-1-miscmisccmd2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 3
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
