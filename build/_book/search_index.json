[
["1-MAINTITLE.html", "Introduction to DNA Nexus and Cloud Computing for Bioinformatics 1 Introduction to DNA Nexus and Cloud Computing for Bioinformatics", " Introduction to DNA Nexus and Cloud Computing for Bioinformatics Stephen Hartley, PhD 2019-12-09 1 Introduction to DNA Nexus and Cloud Computing for Bioinformatics This document is intended to provide a basic introduction to the use of the DNA Nexus cloud computing platform for biostats and bioinformatics. This document can be accessed online at: https://hartleys.github.io/DnaNexusTutorial/ "],
["1-1-hi.html", "1.1 Hi!", " 1.1 Hi! I’m Steve Hartley, Staff Scientist to Stephen Chanock. I’m a bioinformaticist with a software engineering background. Feel free to come to me with questions or problems about: DNA Nexus Other cloud platforms Sequencing Bioinformatics Programming Computer program won’t compile / won’t run / throws bizarre errors email me at: stephen.hartley@nih.mail.gov OR, drop by at: Room 7E582 "],
["1-2-prepreintro2.html", "1.2 Target Audience:", " 1.2 Target Audience: This document/presentation is intended for people of practically any experience level, but it will probably be most helpful for those who: Have basic familiarity with linux/bash/command-line. Hopefully know at least some python or R Have basically zero familiarity with anything cloud-related Want to run things on the cloud "],
["1-3-targetAudience.html", "1.3 Audience Experience Level:", " 1.3 Audience Experience Level: Which of you have: Used a linux command line Run jobs on Biowulf Run an R or python script Written an R or python script Developed novel software that other people use Run jobs on the DNA Nexus cloud Run jobs on any cloud "],
["1-4-targetAudienceNeeds.html", "1.4 Audience Needs:", " 1.4 Audience Needs: (To get an idea of what the usage level is going to be for this platform) Which of you feel you are currently: Being slowed down by biowulf’s limited compute availability (jobs take too long to start or to run) Being slowed or limited by biowulf’s storage availability (need more terabytes!) Expect one or both of the above to be true at some point in the near future "],
["2-whycloud.html", "2 Why use the cloud?", " 2 Why use the cloud? We’re generating a lot of data now. It’s only going to get worse. "],
["2-1-whycloud2.html", "2.1 Why use the cloud?", " 2.1 Why use the cloud? Biowulf is getting kinda crowded. "],
["2-2-whycloud3.html", "2.2 Why use the cloud?", " 2.2 Why use the cloud? The Cloud offers advantages: Less waiting: jobs start faster, and don’t get clogged up during busy hours Massive scalability: Submit thousands of jobs at once. Massive Storage: Store huge amounts of data for (relatively) cheap. Repeatability: You can share your exact code, environment, software versioning, etc, and others can repeat your analysis and get the exact same result "],
["3-dnanexusIntro.html", "3 DNA Nexus", " 3 DNA Nexus DNA Nexus is a cloud based system designed to make cloud computing more accessable to bioinformaticians, biostatisticians, and computational biologists. We are using DNA nexus as to gauge interest in cloud computing and cloud storage. Eventually (hopefully) many of us will move over to the google cloud platform (GCP) or azure (which are substantially cheaper). But we don’t currently have the ability to create accounts on GCP/azure and hook them up to payment. "],
["4-getStarted.html", "4 Getting Started", " 4 Getting Started Go to dnanexus.com, create an account and create a new project. To get preliminary access to funds, add me to your project as an admin and send me an email at: stephen.hartley@nih.mail.gov We have a small shared org account with a few hundred dollars in it. We won’t get more until we start seeing it get used up. "],
["4-1-getStarted1.html", "4.1 Getting Started", " 4.1 Getting Started Create a new account: "],
["4-2-getStarted2.html", "4.2 Getting Started", " 4.2 Getting Started Create a new project: "],
["4-3-getStarted3.html", "4.3 Getting Started", " 4.3 Getting Started Create a new project: "],
["4-4-getStarted4.html", "4.4 Getting Started", " 4.4 Getting Started Add me to the project: "],
["4-5-getStarted5.html", "4.5 Getting Started", " 4.5 Getting Started Add me to the project (username hartleys): "],
["4-6-getStarted6.html", "4.6 Getting Started", " 4.6 Getting Started And then just send me an email (again: stephen.hartley@nih.mail.gov)! I’ll hook it up to the shared org account so you can start running stuff. "],
["5-CMDvsGUI.html", "5 Command Line vs GUI", " 5 Command Line vs GUI There are two ways to interact with DnaNexus: through the command line tool (dx), and through the webpage. The command line tool is more flexible and can do some things that the web interface cannot, but the vast majority of tasks that users will likely encounter can be carried out using either interface. "],
["5-1-dxweb0.html", "5.1 The Web Interface", " 5.1 The Web Interface The main project page will show you the file directory tree for your project. "],
["5-2-dxweb1.html", "5.2 The Web Interface", " 5.2 The Web Interface You can upload data to the cloud for free. But of course once your data is uploaded, you WILL start paying for storage. "],
["5-3-dxweb2.html", "5.3 The Web Interface", " 5.3 The Web Interface Similarly, files can be downloaded from DNA Nexus, although for large files you will incur fees. "],
["5-4-dxweb4.html", "5.4 The Web Interface", " 5.4 The Web Interface Files can be uploaded using simple drag and drop. "],
["6-dx0.html", "6 The Command Line tool: dx", " 6 The Command Line tool: dx The DnaNexus command line tool is loaded as a module on Biowulf. It’s not allowed on the head node, so generally the easiest way to use it is via an interactive session. [hartleys@biowulf ~]$ sinteractive [hartleys@cn3145 ~]$ module load DNAnexus The first thing you will need to do is login to Dna Nexus. This exchanges a key pair, so you won’t have to type in a password every time you use dx. Once you type in your password you will be asked to select a project. [hartleys@cn3145 ~]$ dx login Acquiring credentials from https://auth.dnanexus.com Username [hartleys]: hartleys Password: ... Available projects (CONTRIBUTE or higher): 0) Steve@NCI (ADMINISTER) 1) steveTestProject (ADMINISTER) 2) AzureWest_Project (ADMINISTER) Pick a numbered choice [0]: 0 Setting current project to: Steve@NCI "],
["6-1-dx1.html", "6.1 Using the Command Line Tool", " 6.1 Using the Command Line Tool Once you’re logged into a project, you can explore the project in much the same way you explore a normal filesystem in linux, just adding “dx” to the start of every command. For example, you can ls the files in the root directory: dx ls ## test/ ## testdata/ ## findNi ## installRpackages.on.DX.R ## R-3.6.1-installed-x.tar.gz ## R-3.6.1-installed-x2.tar.gz ## R-3.6.1-installed.tar.gz ## R.package.installed.list.txt ## r_binfo_toolkit ## r_binfo_workstation "],
["6-2-dx1a.html", "6.2 Using the Command Line Tool", " 6.2 Using the Command Line Tool Change to a different directory: dx cd test dx ls dx cd .. ## DESeq2.test.01/ ## DESeq2.test.01.02/ ## test.rbinfo.01/ ## test.rbinfo.02.01/ ## test.rbinfo.02.02/ ## linux.words.txt : file-Fgg96Z80pgPBQv3yPVY6JVxZ ## linux.words.txt : file-Fgg93jj0pgP1xqgVPQj8980x ## linux.words.txt : file-Fgg8xp80pgPKf7X1Pz1zV37P ## linux.words.txt : file-Fgg8j1j0pgP4Gy34BkfKy8Fy ## linux.words.txt : file-Fgg8g5j0pgP2Yx2V1Y5f2QGx ## linux.words.txt : file-Fgg8Q400pgPPypXF3BYV5JKQ ## linux.words.txt : file-Fgg8F280pgP2Yx2V1Y5f2QBF ## linux.words.txt : file-Fgg89QQ0pgP7zY0f7fkB3JF3 ## linux.words.txt : file-Fgg86100pgP8zqyB0KZjYbVp ## linux.words.txt : file-Fgg7zb00pgPP918y40j91gJV ## linux.words.txt : file-Fgg7vzj0pgPKf7X1Pz1zV2q5 ## test.rbinfo.01.sh ## test.rbinfo.02.R ## words.that.begin.with.ni.txt "],
["6-3-dx1b.html", "6.3 Using the Command Line Tool", " 6.3 Using the Command Line Tool And create and delete new directories or files. dx mkdir test2 dx rmdir test2 "],
["6-4-dx2.html", "6.4 Using the Command Line Tool", " 6.4 Using the Command Line Tool You can also upload and download data using the command line tool: dx upload ../examples/indata/linux.words.txt --destination /test/linux.words.txt and dx download /test/linux.words.txt --destination downloaded.linux.words.txt "],
["6-5-dx3.html", "6.5 Using the Command Line Tool", " 6.5 Using the Command Line Tool The dx tool has some pretty good help docs. You can access help for a command using the dx help command. For example, to access help for dx upload, use the command: dx help upload ## usage: dx upload [-h] [--visibility {hidden,visible}] [--property KEY=VALUE] ## [--type TYPE] [--tag TAG] [--details DETAILS] [-p] ## [--brief | --verbose] [--env-help] [--path [PATH]] [-r] ## [--wait] [--no-progress] [--buffer-size WRITE_BUFFER_SIZE] ## [--singlethread] ## filename [filename ...] ## ## Upload local file(s) or directory. If &quot;-&quot; is provided, stdin will be used ## instead. By default, the filename will be used as its new name. If ## --path/--destination is provided with a path ending in a slash, the filename ## will be used, and the folder path will be used as a destination. If it does ## not end in a slash, then it will be used as the final name. ## ## positional arguments: ## filename Local file or directory to upload (&quot;-&quot; indicates stdin ## input); provide multiple times to upload multiple ## files or directories ## ## optional arguments: ## -h, --help show this help message and exit ## --brief Display a brief version of the return value; for most ## commands, prints a DNAnexus ID per line ## --verbose If available, displays extra verbose output ## --env-help Display help message for overriding environment ## variables ## --path [PATH], --destination [PATH] ## DNAnexus path to upload file(s) to (default uses ## current project and folder if not provided) ## -r, --recursive Upload directories recursively ## --wait Wait until the file has finished closing ## --no-progress Do not show a progress bar ## --buffer-size WRITE_BUFFER_SIZE ## Set the write buffer size (in bytes) ## --singlethread Enable singlethreaded uploading ## ## metadata arguments: ## --visibility {hidden,visible} ## Whether the object is hidden or not ## --property KEY=VALUE Key-value pair to add as a property; repeat as ## necessary, e.g. &quot;--property key1=val1 --property ## key2=val2&quot; ## --type TYPE Type of the data object; repeat as necessary, e.g. &quot;-- ## type type1 --type type2&quot; ## --tag TAG Tag of the data object; repeat as necessary, e.g. &quot;-- ## tag tag1 --tag tag2&quot; ## --details DETAILS JSON to store as details ## -p, --parents Create any parent folders necessary For a full list of available dx commands: dx help all ## dx all: All commands ## ## Commands: ## ## add Add one or more items to a list ## add developers Add developers for an app ## add member Grant a user membership to an org ## add stage Add a stage to a workflow ## add users Add authorized users for an app ## add_types Add types to a data object ## api Call an API method ## build Upload and build a new applet/app, or a workflow ## build_asset Build an asset bundle ## cat Print file(s) to stdout ## cd Change the current working directory ## clearenv Clears all environment variables set by dx ## close Close data object(s) ## cp Copy objects and/or folders between different projects ## describe Describe a remote object ## download Download file(s) ## env Print all environment variables in use ## exit Exit out of the interactive shell ## find Search functionality over various DNAnexus entities ## find analyses List analyses in the current project ## find apps List available apps ## find data List data objects in the current project ## find executions List executions (jobs and analyses) in the current project ## find globalworkflowsList available global workflows ## find jobs List jobs in the current project ## find org List entities within a specific org. &quot;dx find org ## members&quot; lists members in the ## specified org &quot;dx find org ## projects&quot; lists projects billed to the ## specified org &quot;dx find org ## apps&quot; lists apps billed to the ## specified org Please execute &quot;dx find ## org -h&quot; for more information. ## find org apps List apps billed to the specified org ## find org members List members in the specified org ## find org projects List projects billed to the specified org ## find orgs List orgs ## find projects List projects ## generate_batch_inputsGenerate a batch plan (one or more TSV files) for batch ## execution ## get Download records, apps, applets, workflows, and files ## get_details Get details of a data object ## head Print part of a file ## help Display help messages and dx commands by category ## install Install an app ## invite Invite another user to a project or make it public ## list Print the members of a list ## list database List entities associated with a specific database. For ## example, &quot;dx list database ## files&quot; lists database files associated ## with a specific database. ## Please execute &quot;dx list database -h&quot; ## for more information. ## list database filesList files associated with a specific database ## list developers List developers for an app ## list stages List the stages in a workflow ## list users List authorized users for an app ## login Log in (interactively or with an existing API token) ## logout Log out and remove credentials ## ls List folders and/or objects in a folder ## make_download_url Create a file download link for sharing ## mkdir Create a new folder ## mv Move or rename objects and/or folders inside a project ## new Create a new project or data object ## new org Create new org ## new project Create a new project ## new record Create a new record ## new user Create a new user account ## new workflow Create a new workflow ## publish Publish an app or a global workflow ## pwd Print current working directory ## remove Remove one or more items to a list ## remove developers Remove developers for an app ## remove member Revoke the org membership of a user ## remove stage Remove a stage from a workflow ## remove users Remove authorized users for an app ## remove_types Remove types from a data object ## rename Rename a project or data object ## rm Remove data objects and folders ## rmdir Remove a folder ## rmproject Delete a project ## run Run an applet, app, or workflow ## select List and select a project to switch to ## set_details Set details on a data object ## set_properties Set properties of a project, data object, or execution ## set_visibility Set visibility on a data object ## setenv Sets environment variables for the session ## ssh Connect to a running job via SSH ## ssh_config Configure SSH keys for your DNAnexus account ## tag Tag a project, data object, or execution ## terminate Terminate jobs or analyses ## tree List folders and objects in a tree ## uninstall Uninstall an app ## uninvite Revoke others&#39; permissions on a project you administer ## unset_properties Unset properties of a project, data object, or execution ## untag Untag a project, data object, or execution ## update Update certain types of metadata ## update member Update the membership of a user in an org ## update org Update information about an org ## update project Updates a specified project with the specified options ## update stage Update the metadata for a stage in a workflow ## update workflow Update the metadata for a workflow ## upgrade Upgrade dx-toolkit (the DNAnexus SDK and this program) ## upload Upload file(s) or directory ## wait Wait for data object(s) to close or job(s) to finish ## watch Watch logs of a job and its subjobs ## whoami Print the username of the current user "],
["7-dnanexusNotes.html", "7 DNA Nexus Apps", " 7 DNA Nexus Apps DNA nexus allows users and developers to create “apps” which can be shared and used to run analysis/data processing pipelines. Many common tasks already have apps developed by the DNA Nexus team: "],
["7-1-dnaNexusAppsGATK1.html", "7.1 Running Apps", " 7.1 Running Apps Apps can be run via the web interface: "],
["7-2-dnaNexusAppsGATK2.html", "7.2 Running Apps", " 7.2 Running Apps Apps can be run via the web interface: "],
["7-3-dnaNexusAppsGATK3.html", "7.3 Running Apps", " 7.3 Running Apps Apps can be run via the web interface: "],
["7-4-dnaNexusAppsGATK4.html", "7.4 Running Apps", " 7.4 Running Apps Or, if you prefer, you can run via the dx command line: dx run app-gatk4_genotypegvcfs_single_sample_parallel \\ -i --variant_gvcf /testdata/mySingleSampleGVCF.g.vcf.gz \\ -i --genome_fastagz /testdata/myGenomeFasta.fasta.gz \\ --destination /my/output/dir "],
["8-dnanexusCmdLine0.html", "8 DNA Nexus Workstations and Scripts", " 8 DNA Nexus Workstations and Scripts Alternatively, instead of running an app you can also run command line tools on the DNA nexus platform. If you have something running on biowulf, we can probably get it running on DNA nexus. "],
["8-1-dnanexusCmdLine1.html", "8.1 DNA Nexus Workstations and Scripts", " 8.1 DNA Nexus Workstations and Scripts You can launch an interactive workstation using my toolkit/workstation app: dx run app-r_binfo_toolkit --ssh \\ -i max_session_length=12h This app just gives you access to an Ubuntu 16.04 machine with a whole bunch of bioinformatics software preinstalled. "],
["8-2-rbinfotk.html", "8.2 R Bioinformatics Toolkit", " 8.2 R Bioinformatics Toolkit The R bioinformatics Toolkit app comes with a slew of useful packages preinstalled: bcftools (v1.9) bedtools (v2.29.0) bgzip (v1.9) plink (v1.90b6) sambamba (v0.7.0) samtools (v1.9) seqtk (v1.3 r106) tabix (v1.9) vcflib binaries (git revision 8bc93d8a74735b0fe6303f78b2764d6987ba1cde) GATK 4.0.2.1 FreeBayes vArmyKnife picard tools R 3.6.1 Every R package I’ve ever used + a bunch I’ve only heard about "],
["8-3-rbinfotkr.html", "8.3 R Bioinformatics Toolkit", " 8.3 R Bioinformatics Toolkit The full list of R packages that I’ve installed: acepack affy affyio annotate AnnotationDbi AnnotationFilter apeglm askpass assertthat backports base base64enc bbmle beeswarm BH Biobase BiocFileCache BiocGenerics BiocManager BiocParallel BiocVersion biomaRt Biostrings bit bit64 bitops blob boot broom callr cellranger checkmate circlize class cli clipr clue cluster clusterProfiler coda codetools colorspace compiler ComplexHeatmap cowplot crayon curl data.table datasets DBI dbplyr DelayedArray DESeq2 digest DO.db DOSE dplyr edgeR ellipsis emdbook enrichplot ensembldb europepmc evaluate fansi farver fastmap fastmatch fgsea forcats foreign formatR Formula fs futile.logger futile.options genefilter geneplotter generics GenomeInfoDb GenomeInfoDbData GenomicAlignments GenomicFeatures GenomicRanges GEOquery GetoptLong ggforce ggplot2 ggplotify ggraph ggrepel ggridges GlobalOptions glue GO.db GOSemSim graph graphics graphlayouts grDevices grid gridExtra gridGraphics gtable haven hexbin highr Hmisc hms htmlTable htmltools htmlwidgets httpuv httr hwriter igraph impute IRanges JctSeqData jsonlite JunctionSeq KernSmooth knitr labeling lambda.r later lattice latticeExtra lazyeval lifecycle limma locfit lubridate magrittr markdown MASS Matrix matrixStats memoise methods mgcv mime modelr multtest munsell nlme nnet numDeriv openssl parallel pasilla pheatmap pillar pkgconfig plogr plotrix plyr png polyclip preprocessCore prettyunits processx progress promises ProtGenerics ps purrr QoRTs QoRTsExampleData qvalue R6 rappdirs RColorBrewer Rcpp RcppArmadillo RcppEigen RcppNumerical RCurl readr readxl rematch reprex reshape2 Rgraphviz Rhtslib rjson rlang rmarkdown rpart Rsamtools RSQLite rstudioapi rtracklayer rvcheck rvest S4Vectors scales selectr shape shiny ShortRead snow sourcetools spatial splines statmod stats stats4 stringi stringr SummarizedExperiment survival sys tcltk tibble tidygraph tidyr tidyselect tidyverse tinytex tools triebeard tweenr tximport UpSetR urltools utf8 utils vctrs viridis viridisLite vsn whisker withr xfun XML xml2 xtable XVector yaml zeallot zlibbioc zoo "],
["9-appMon1.html", "9 App Monitoring", " 9 App Monitoring Once you’ve submitted a job, you can monitor its progress and status using the Monitor tab on the Project screen. "],
["9-1-appMon2.html", "9.1 App Monitoring", " 9.1 App Monitoring Here you’ll see a list of jobs and their status, cost, timestamps, etc. "],
["9-2-appMon3.html", "9.2 App Monitoring", " 9.2 App Monitoring By clicking on an individual job you can see more detailed info, and can view the STDOUT/STDERR log. "],
["9-3-appMon4.html", "9.3 App Monitoring", " 9.3 App Monitoring "],
["10-questions.html", "10 Questions?", " 10 Questions? "],
["10-1-miscmisccmd2.html", "10.1 More useful commands:", " 10.1 More useful commands: There are a number of simple commands that dx offers. See what projects you have access to: dx find projects #Select the project you want from the above list: dx select project-FbvPXyQ0pgP1PQbkJG1vfQpz You can use cat to quickly preview files: dx cat /test/words.that.begin.with.ni.txt | head -n10 ## ni ## niacin ## niacinamide ## niacins ## niagara ## niagra ## niais ## niaiserie ## nialamide ## niata set -x dx describe /test/words.that.begin.with.ni.txt ## + dx describe /test/words.that.begin.with.ni.txt ## Result 1: ## ID file-FgXgbfj0gzgbqx5KJ97V6J7j ## Class file ## Project project-FbvPXyQ0pgP1PQbkJG1vfQpz ## Folder /test ## Name words.that.begin.with.ni.txt ## State closed ## Visibility visible ## Types - ## Properties - ## Tags - ## Outgoing links - ## Created Mon Dec 2 15:58:03 2019 ## Created by hartleys ## via the job job-FgXgbK80pgPJJ54XF2qK4zBp ## Last modified Mon Dec 2 15:58:05 2019 ## archivalState &quot;live&quot; ## Media type text/plain ## Size 10.33 KB And you can use dx watch to examine a job in progress… dx watch &lt;jobid&gt; "],
["11-legal.html", "11 Legal", " 11 Legal This document and all relevant documentation is “United States Government Work” under he terms of the United States Copyright Act. It was written as part of the authors’ official duties for the United States Government and thus vArmyKnife cannot be copyrighted. This software is freely available to the public for use without a copyright notice. Restrictions cannot be placed on its present or future use. Although all reasonable efforts have been taken to ensure the accuracy and reliability of the software, documentation, and data, the National Human Genome Research Institute (NHGRI), the National Cancer Institute (NCI) and the U.S. Government does not and cannot warrant the performance or results that may be obtained by using this software or data. NHGRI, NCI and the U.S. Government disclaims all warranties as to performance, merchantability or fitness for any particular purpose. In any work or product derived from this material, proper attribution of the authors as the source of the software or data may be made, using “NCI Division of Cancer Epidemiology and Genetics, Human Genetics Program” as the citation. "],
["references.html", "References", " References "]
]
